# Web Installer Documentation

This directory contains files for the ESP Web Tools web installer.

## Flash Layout

The ESP32-S3 firmware uses the following flash layout:

| Component | Offset (hex) | Offset (decimal) | File |
|-----------|--------------|------------------|------|
| Bootloader | 0x0 | 0 | bootloader.bin |
| Partition Table | 0x8000 | 32768 | partitions.bin |
| Application | 0x10000 | 65536 | firmware.bin |

**Important**: These offsets are critical for proper boot. Flashing the application firmware at offset 0x0 will cause a SHA-256 validation error and boot failure.

## Files

- `index.html` - Web installer interface
- `manifest.json` - ESP Web Tools manifest defining flash layout
- `bootloader.bin` - ESP32-S3 bootloader (generated by build)
- `partitions.bin` - Partition table (generated by build)
- `firmware.bin` - Application firmware (generated by build)

## Build Process

The GitHub Actions workflow (`../.github/workflows/build.yml`) builds the firmware using PlatformIO and copies the required binaries to this directory:

```bash
pio run
cp .pio/build/esp32-s3-devkitc-1/firmware.bin docs/firmware.bin
cp .pio/build/esp32-s3-devkitc-1/bootloader.bin docs/bootloader.bin
cp .pio/build/esp32-s3-devkitc-1/partitions.bin docs/partitions.bin
```

## Testing

To test the web installer locally:
1. Build the firmware: `pio run`
2. Copy binaries to docs directory (see commands above)
3. Serve the docs directory with a web server: `python -m http.server -d docs 8000`
4. Open http://localhost:8000 in Chrome/Edge
5. Connect your ESP32-S3 and click "Install to ESP32-S3"

## References

- [ESP Web Tools Documentation](https://esphome.github.io/esp-web-tools/)
- [ESP32-S3 Flash Layout](https://docs.espressif.com/projects/esp-idf/en/latest/esp32s3/api-guides/partition-tables.html)
- [PlatformIO ESP32 Platform](https://docs.platformio.org/en/latest/platforms/espressif32.html)
